# Minecraft Plugin API Documentation

This guide provides technical details on how to programmatically interact with **Hangar (PaperMC)** and **Spiget (SpigotMC)** to search for and download Minecraft plugins.

---

## 1. Hangar API (PaperMC)
**Status:** ✅ Official, Stable, Developer Friendly  
**Base URL:** `https://hangar.papermc.io/api/v1`  
**Authentication:** Not required for public plugins.

### A. Search for a Project
To find a plugin, you first need its **Slug** (a URL-friendly name, e.g., `Essentials` or `ViaVersion`).

* **Endpoint:** `GET /projects`
* **Parameter:** `q` (The search query)
* **Example Request:**
    ```http
    GET [https://hangar.papermc.io/api/v1/projects?q=ViaVersion&limit=1](https://hangar.papermc.io/api/v1/projects?q=ViaVersion&limit=1)
    ```
* **What to extract:** Look for `result[0].namespace.slug`.

### B. List Versions
Once you have the slug, fetch the available versions to find one matching your Minecraft server version.

* **Endpoint:** `GET /projects/{slug}/versions`
* **Example Request:**
    ```http
    GET [https://hangar.papermc.io/api/v1/projects/ViaVersion/versions](https://hangar.papermc.io/api/v1/projects/ViaVersion/versions)
    ```
* **Filtering Logic:**
    Iterate through the JSON results. Check the `platformDependencies` object to see if `PAPER` lists your target Minecraft version (e.g., `"1.20.4"`).

### C. Download a Plugin
Construct the download URL using the **Slug** and the specific **Version Name**.

* **Endpoint:** `GET /projects/{slug}/versions/{version}/PAPER/download`
* **Example Request:**
    ```http
    GET [https://hangar.papermc.io/api/v1/projects/ViaVersion/versions/4.9.2/PAPER/download](https://hangar.papermc.io/api/v1/projects/ViaVersion/versions/4.9.2/PAPER/download)
    ```
    *(Note: This returns the raw `.jar` file directly).*

---

## 2. Spiget API (SpigotMC Wrapper)
**Status:** ⚠️ Unofficial, Subject to Cloudflare Blocks  
**Base URL:** `https://api.spiget.org/v2`  
**Note:** Used as a workaround because SpigotMC.org does not have a public API.

### A. Search for a Resource
Find the unique numeric **ID** of the plugin.

* **Endpoint:** `GET /search/resources/{name}`
* **Parameter:** `size` (Limit results)
* **Example Request:**
    ```http
    GET [https://api.spiget.org/v2/search/resources/WorldEdit?size=1](https://api.spiget.org/v2/search/resources/WorldEdit?size=1)
    ```
* **What to extract:** Look for `[0].id` (e.g., `68`).

### B. Download a Resource
Use the numeric ID to download the latest version.

* **Endpoint:** `GET /resources/{id}/download`
* **Example Request:**
    ```http
    GET [https://api.spiget.org/v2/resources/68/download](https://api.spiget.org/v2/resources/68/download)
    ```
* **Important:**
    * This endpoint returns a **302 Redirect**. Your HTTP client must follow redirects (`-L` in curl).
    * **Cloudflare Warning:** SpigotMC often blocks automated requests. If you receive a small HTML file instead of a `.jar`, your request was blocked by bot protection.

---

## Summary Comparison

| Feature | Hangar (Paper) | Spiget (Spigot) |
| :--- | :--- | :--- |
| **Reliability** | High (Official) | Medium (Unofficial Wrapper) |
| **Auth Required** | No (for public) | No |
| **Version Checking** | Precise (JSON list) | Difficult (Often generic) |
| **Download Success** | 100% | ~50% (Due to Cloudflare) |